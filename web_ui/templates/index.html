<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fraud Detection Monitoring</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        table { width: 80%; margin: 20px auto; border-collapse: collapse; }
        th, td { padding: 10px; border: 1px solid black; text-align: center; }
        th { background-color: green; color: white; }
        .fraud-yes { color: red; font-weight: bold; }
        .fraud-no { color: green; }
    </style>
</head>
<body>

    <h2>Fraud Detection Monitoring</h2>
    <table id="fraudTable">
        <thead>
            <tr>
                <th>Transaction ID</th>
                <th>Amount ($)</th>
                <th>Risk Score</th>
                <th>User Behavior</th>
                <th>Device Trust</th>
                <th>Fraudulent</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <script>
        var socket = io.connect('http://' + document.domain + ':' + location.port + '/fraud');

        socket.on('fraud_update', function(data) {
            let tableBody = document.querySelector("#fraudTable tbody");
            let tr = document.createElement("tr");

            tr.innerHTML = `
                <td>${data.transaction_id}</td>
                <td>$${data.amount.toFixed(2)}</td>
                <td>${data.risk_score}</td>
                <td>${data.user_behavior}</td>
                <td>${data.device_trust}</td>
                <td class="${data.fraudulent ? 'fraud-yes' : 'fraud-no'}">
                    ${data.fraudulent ? 'Yes' : 'No'}
                </td>
            `;

            tableBody.prepend(tr);
            if (tableBody.rows.length > 10) tableBody.deleteRow(-1); // Keep only 10 latest entries
        });
    </script>

</body>
</html>
